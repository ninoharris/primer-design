<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
</head>
<body>
	<a href="#">Click me number 1</a>
	<a href="#">Click me number 2</a>
	<a href="#">Click me number 3</a>
	<a href="#">Click me number 4</a>
	<a href="#">Click me number 5</a>
	<a href="#">Click me number 6</a>
	<a href="#">Click me number 7</a>
	<a href="#">Click me number 8</a>
	<a href="#">Click me number 9</a>
	<a href="#">Click me number 10</a>
	<a href="#">Click me number 11</a>
	<a href="#">Click me number 12</a>
	<a href="#">Click me number 13</a>
	<a href="#">Click me number 14</a>
	<a href="#">Click me number 15</a>
	<a href="#">Click me number 16</a>
	<a href="#">Click me number 17</a>
	<a href="#">Click me number 18</a>
	<a href="#">Click me number 19</a>
	<a href="#">Click me number 20</a>
	<a href="#">Click me number 21</a>
	<a href="#">Click me number 22</a>
	<a href="#">Click me number 23</a>
	<a href="#">Click me number 24</a>
	<a href="#">Click me number 25</a>
	<a href="#">Click me number 26</a>
	<a href="#">Click me number 27</a>
	<a href="#">Click me number 28</a>
	<a href="#">Click me number 29</a>
	<a href="#">Click me number 30</a>
	<a href="#">Click me number 31</a>
	<a href="#">Click me number 32</a>
	<a href="#">Click me number 33</a>
	<a href="#">Click me number 34</a>
	<a href="#">Click me number 35</a>
	<a href="#">Click me number 36</a>
	<a href="#">Click me number 37</a>
	<a href="#">Click me number 38</a>
	<a href="#">Click me number 39</a>
	<a href="#">Click me number 40</a>
	<a href="#">Click me number 41</a>
	<a href="#">Click me number 42</a>
	<a href="#">Click me number 43</a>
	<a href="#">Click me number 44</a>
	<a href="#">Click me number 45</a>
	<a href="#">Click me number 46</a>
	<a href="#">Click me number 47</a>
	<a href="#">Click me number 48</a>
	<a href="#">Click me number 49</a>
	<a href="#">Click me number 50</a>
	<a href="#">Click me number 51</a>
	<a href="#">Click me number 52</a>
	<a href="#">Click me number 53</a>
	<a href="#">Click me number 54</a>
	<a href="#">Click me number 55</a>
	<a href="#">Click me number 56</a>
	<a href="#">Click me number 57</a>
	<a href="#">Click me number 58</a>
	<a href="#">Click me number 59</a>
	<a href="#">Click me number 60</a>
	<a href="#">Click me number 61</a>
	<a href="#">Click me number 62</a>
	<a href="#">Click me number 63</a>
	<a href="#">Click me number 64</a>
	<a href="#">Click me number 65</a>
	<a href="#">Click me number 66</a>
	<a href="#">Click me number 67</a>
	<a href="#">Click me number 68</a>
	<a href="#">Click me number 69</a>
	<a href="#">Click me number 70</a>
	<a href="#">Click me number 71</a>
	<a href="#">Click me number 72</a>
	<a href="#">Click me number 73</a>
	<a href="#">Click me number 74</a>
	<a href="#">Click me number 75</a>
	<a href="#">Click me number 76</a>
	<a href="#">Click me number 77</a>
	<a href="#">Click me number 78</a>
	<a href="#">Click me number 79</a>
	<a href="#">Click me number 80</a>
	<a href="#">Click me number 81</a>
	<a href="#">Click me number 82</a>
	<a href="#">Click me number 83</a>
	<a href="#">Click me number 84</a>
	<a href="#">Click me number 85</a>
	<a href="#">Click me number 86</a>
	<a href="#">Click me number 87</a>
	<a href="#">Click me number 88</a>
	<a href="#">Click me number 89</a>
	<a href="#">Click me number 90</a>
	<a href="#">Click me number 91</a>
	<a href="#">Click me number 92</a>
	<a href="#">Click me number 93</a>
	<a href="#">Click me number 94</a>
	<a href="#">Click me number 95</a>
	<a href="#">Click me number 96</a>
	<a href="#">Click me number 97</a>
	<a href="#">Click me number 98</a>
	<a href="#">Click me number 99</a>
	<a href="#">Click me number 100</a>
	<script>
	// var badFindNodes = function() {
	// 	var i = document.getElementsByTagName('a').length,
	// 	nodes = [],
	// 	found
	// 	return nodes
	// }

	var betterFindNodes = function (callback) {
		var nodes = document.getElementsByTagName('a'),
		i = nodes.length,
		found = []

		// Check if callback is callable
		if (typeof callback !== 'function') {
			callback = false
		}

		while (i) {
			i -= 1
			if (callback) {
				callback(nodes[i])
			}
			found.push(nodes[i])
		}

		return found
	}

	var myApp = {} // module pattern
	myApp.color = 'green'
	myApp.paint = function (node) {
		node.style.color = this.color
	}

	// betterFindNodes is *invoked* as a function, not method.
	// Hence this = global object.
	// myApp.paint uses this, which is not bound to myApp.
	console.log(betterFindNodes(myApp.paint.bind(myApp)))

	// alternatively, Fat arrow functions allow *lexical* this.
	myApp.color = 'purple'
	betterFindNodes((x) => myApp.paint(x))

	</script>
</body>
</html>
